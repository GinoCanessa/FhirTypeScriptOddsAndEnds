// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR ComplexType: TriggerDefinition

import * as fhir from '../fhir.js'

import { TriggerTypeValueSet, TriggerTypeValueSetType, TriggerTypeValueSetEnum } from '../fhirValueSets/TriggerTypeValueSet.js'

/**
 * A description of a triggering event. Triggering events can be named events, data events, or periodic, as determined by the type element.
 */
export type ITriggerDefinition = fhir.IFhirElement & { 
  /**
   * The type of triggering event.
   */
  type: TriggerTypeValueSetEnum|null;
  /**
   * Extended properties for primitive element: TriggerDefinition.type
   */
  _type?: fhir.IFhirElement|undefined;
  /**
   * An event name can be provided for all event types, but is required for named events. If a name is provided for a type other than named events, it is considered to be a shorthand for the semantics described by the formal description of the event.
   */
  name?: string|undefined;
  /**
   * Extended properties for primitive element: TriggerDefinition.name
   */
  _name?: fhir.IFhirElement|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  timingTiming?: fhir.ITiming|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  timingReference?: fhir.IReference|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  timingDate?: string|undefined;
  /**
   * Extended properties for primitive element: TriggerDefinition.timing[x]
   */
  _timingDate?: fhir.IFhirElement|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  timingDateTime?: string|undefined;
  /**
   * Extended properties for primitive element: TriggerDefinition.timing[x]
   */
  _timingDateTime?: fhir.IFhirElement|undefined;
  /**
   * This element shall be present for any data type trigger.
   */
  data?: fhir.IDataRequirement[]|undefined;
  /**
   * This element can be only be specified for data type triggers and provides additional semantics for the trigger. The context available within the condition is based on the type of data event. For all events, the current resource will be available as context. In addition, for modification events, the previous resource will also be available. The expression may be inlined, or may be a simple absolute URI, which is a reference to a named expression within a logic library referenced by a library element or extension within the containing resource. If the expression is a FHIR Path expression, it evaluates in the context of a resource of one of the type identified in the data requirement, and may also refer to the variable %previous for delta comparisons on events of type data-changed, data-modified, and data-deleted which will always have the same type.
   */
  condition?: fhir.IExpression|undefined;
}

/**
 * A description of a triggering event. Triggering events can be named events, data events, or periodic, as determined by the type element.
 */
export class TriggerDefinition extends fhir.FhirElement implements ITriggerDefinition {
  /**
   * The type of triggering event.
   */
  public type: TriggerTypeValueSetEnum|null;
  /**
   * Extended properties for primitive element: TriggerDefinition.type
   */
  public _type?: fhir.FhirElement|undefined;
  /**
   * An event name can be provided for all event types, but is required for named events. If a name is provided for a type other than named events, it is considered to be a shorthand for the semantics described by the formal description of the event.
   */
  public name?: string|undefined;
  /**
   * Extended properties for primitive element: TriggerDefinition.name
   */
  public _name?: fhir.FhirElement|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  public timingTiming?: fhir.Timing|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  public timingReference?: fhir.Reference|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  public timingDate?: string|undefined;
  /**
   * Extended properties for primitive element: TriggerDefinition.timing[x]
   */
  public _timingDate?: fhir.FhirElement|undefined;
  /**
   * The timing of the event (if this is a periodic trigger).
   */
  public timingDateTime?: string|undefined;
  /**
   * Extended properties for primitive element: TriggerDefinition.timing[x]
   */
  public _timingDateTime?: fhir.FhirElement|undefined;
  /**
   * This element shall be present for any data type trigger.
   */
  public data?: fhir.DataRequirement[]|undefined;
  /**
   * This element can be only be specified for data type triggers and provides additional semantics for the trigger. The context available within the condition is based on the type of data event. For all events, the current resource will be available as context. In addition, for modification events, the previous resource will also be available. The expression may be inlined, or may be a simple absolute URI, which is a reference to a named expression within a logic library referenced by a library element or extension within the containing resource. If the expression is a FHIR Path expression, it evaluates in the context of a resource of one of the type identified in the data requirement, and may also refer to the variable %previous for delta comparisons on events of type data-changed, data-modified, and data-deleted which will always have the same type.
   */
  public condition?: fhir.Expression|undefined;
  /**
   * Default constructor for TriggerDefinition - initializes any required elements to null if a value is not provided.
   */
  constructor(source:Partial<ITriggerDefinition> = { }) {
    super(source);
    if (source['type']) { this.type = source.type; }
    else { this.type = null; }
    if (source['_type']) { this._type = new fhir.FhirElement(source._type!); }
    if (source['name']) { this.name = source.name; }
    if (source['_name']) { this._name = new fhir.FhirElement(source._name!); }
    if (source['timingTiming']) { this.timingTiming = new fhir.Timing(source.timingTiming!); }
    if (source['timingReference']) { this.timingReference = new fhir.Reference(source.timingReference!); }
    if (source['timingDate']) { this.timingDate = source.timingDate; }
    if (source['_timingDate']) { this._timingDate = new fhir.FhirElement(source._timingDate!); }
    if (source['timingDateTime']) { this.timingDateTime = source.timingDateTime; }
    if (source['_timingDateTime']) { this._timingDateTime = new fhir.FhirElement(source._timingDateTime!); }
    if (source['data']) { this.data = source.data.map((x) => new fhir.DataRequirement(x)); }
    if (source['condition']) { this.condition = new fhir.Expression(source.condition!); }
  }
  /**
   * Required-bound Value Set for type
   */
  public static typeRequiredValueSet():TriggerTypeValueSetType {
    return TriggerTypeValueSet;
  }
  /**
   * Function to perform basic model validation (e.g., check if required elements are present).
   */
  public override doModelValidation():[string,string][] {
    var results:[string,string][] = super.doModelValidation();
    if (!this["type"]) { results.push(["type",'Missing required element: TriggerDefinition.type']); }
    if (this["_type"]) { results.push(...this._type.doModelValidation()); }
    if (this["_name"]) { results.push(...this._name.doModelValidation()); }
    if (this["timingTiming"]) { results.push(...this.timingTiming.doModelValidation()); }
    if (this["timingReference"]) { results.push(...this.timingReference.doModelValidation()); }
    if (this["_timingDate"]) { results.push(...this._timingDate.doModelValidation()); }
    if (this["_timingDateTime"]) { results.push(...this._timingDateTime.doModelValidation()); }
    if (this["data"]) { this.data.forEach((x) => { results.push(...x.doModelValidation()); }) }
    if (this["condition"]) { results.push(...this.condition.doModelValidation()); }
    return results;
  }
}
