// <auto-generated/>
// Contents of: hl7.fhir.r4.core version: 4.0.1
// Minimum TypeScript Version: 3.7
// FHIR Resource: DetectedIssue

import * as fhir from '../fhir.js'

import { ManifestationOrSymptomValueSet, ManifestationOrSymptomValueSetType, ManifestationOrSymptomValueSetEnum } from '../fhirValueSets/ManifestationOrSymptomValueSet.js'
import { DetectedissueMitigationActionValueSet, DetectedissueMitigationActionValueSetType, DetectedissueMitigationActionValueSetEnum } from '../fhirValueSets/DetectedissueMitigationActionValueSet.js'
import { ObservationStatusValueSet, ObservationStatusValueSetType, ObservationStatusValueSetEnum } from '../fhirValueSets/ObservationStatusValueSet.js'
import { DetectedissueCategoryValueSet, DetectedissueCategoryValueSetType, DetectedissueCategoryValueSetEnum } from '../fhirValueSets/DetectedissueCategoryValueSet.js'
import { DetectedissueSeverityValueSet, DetectedissueSeverityValueSetType, DetectedissueSeverityValueSetEnum } from '../fhirValueSets/DetectedissueSeverityValueSet.js'

/**
 * Supporting evidence or manifestations that provide the basis for identifying the detected issue such as a GuidanceResponse or MeasureReport.
 */
export type IDetectedIssueEvidence = fhir.IBackboneElement & { 
  /**
   * A manifestation that led to the recording of this detected issue.
   */
  code?: fhir.ICodeableConcept[]|undefined;
  /**
   * Links to resources that constitute evidence for the detected issue such as a GuidanceResponse or MeasureReport.
   */
  detail?: fhir.IReference[]|undefined;
}

/**
 * Indicates an action that has been taken or is committed to reduce or eliminate the likelihood of the risk identified by the detected issue from manifesting.  Can also reflect an observation of known mitigating factors that may reduce/eliminate the need for any action.
 */
export type IDetectedIssueMitigation = fhir.IBackboneElement & { 
  /**
   * The "text" component can be used for detail or when no appropriate code exists.
   */
  action: fhir.ICodeableConcept|null;
  /**
   * This might not be the same as when the mitigating step was actually taken.
   */
  date?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.mitigation.date
   */
  _date?: fhir.IFhirElement|undefined;
  /**
   * Identifies the practitioner who determined the mitigation and takes responsibility for the mitigation step occurring.
   */
  author?: fhir.IReference|undefined;
}

/**
 * Indicates an actual or potential clinical issue with or between one or more active or proposed clinical actions for a patient; e.g. Drug-drug interaction, Ineffective treatment frequency, Procedure-condition conflict, etc.
 */
export type IDetectedIssue = fhir.IDomainResource & { 
  /**
   * Resource Type Name
   */
  resourceType: "DetectedIssue";
  /**
   * Business identifier associated with the detected issue record.
   */
  identifier?: fhir.IIdentifier[]|undefined;
  /**
   * This element is labeled as a modifier because the status contains the codes cancelled and entered-in-error that mark the issue as not currently valid.
   */
  status: ObservationStatusValueSetEnum|null;
  /**
   * Extended properties for primitive element: DetectedIssue.status
   */
  _status?: fhir.IFhirElement|undefined;
  /**
   * Identifies the general type of issue identified.
   */
  code?: fhir.ICodeableConcept|undefined;
  /**
   * Indicates the degree of importance associated with the identified issue based on the potential impact on the patient.
   */
  severity?: DetectedissueSeverityValueSetEnum|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.severity
   */
  _severity?: fhir.IFhirElement|undefined;
  /**
   * Indicates the patient whose record the detected issue is associated with.
   */
  patient?: fhir.IReference|undefined;
  /**
   * The date or period when the detected issue was initially identified.
   */
  identifiedDateTime?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.identified[x]
   */
  _identifiedDateTime?: fhir.IFhirElement|undefined;
  /**
   * The date or period when the detected issue was initially identified.
   */
  identifiedPeriod?: fhir.IPeriod|undefined;
  /**
   * Individual or device responsible for the issue being raised.  For example, a decision support application or a pharmacist conducting a medication review.
   */
  author?: fhir.IReference|undefined;
  /**
   * There's an implicit constraint on the number of implicated resources based on DetectedIssue.type; e.g. For drug-drug, there would be more than one.  For timing, there would typically only be one.
   */
  implicated?: fhir.IReference[]|undefined;
  /**
   * Supporting evidence or manifestations that provide the basis for identifying the detected issue such as a GuidanceResponse or MeasureReport.
   */
  evidence?: fhir.IDetectedIssueEvidence[]|undefined;
  /**
   * Should focus on information not covered elsewhere as discrete data - no need to duplicate the narrative.
   */
  detail?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.detail
   */
  _detail?: fhir.IFhirElement|undefined;
  /**
   * The literature, knowledge-base or similar reference that describes the propensity for the detected issue identified.
   */
  reference?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.reference
   */
  _reference?: fhir.IFhirElement|undefined;
  /**
   * Indicates an action that has been taken or is committed to reduce or eliminate the likelihood of the risk identified by the detected issue from manifesting.  Can also reflect an observation of known mitigating factors that may reduce/eliminate the need for any action.
   */
  mitigation?: fhir.IDetectedIssueMitigation[]|undefined;
}

/**
 * Supporting evidence or manifestations that provide the basis for identifying the detected issue such as a GuidanceResponse or MeasureReport.
 */
export class DetectedIssueEvidence extends fhir.BackboneElement implements IDetectedIssueEvidence {
  /**
   * A manifestation that led to the recording of this detected issue.
   */
  public code?: fhir.CodeableConcept[]|undefined;
  /**
   * Links to resources that constitute evidence for the detected issue such as a GuidanceResponse or MeasureReport.
   */
  public detail?: fhir.Reference[]|undefined;
  /**
   * Default constructor for DetectedIssueEvidence - initializes any required elements to null if a value is not provided.
   */
  constructor(source:Partial<IDetectedIssueEvidence> = { }) {
    super(source);
    if (source['code']) { this.code = source.code.map((x) => new fhir.CodeableConcept(x)); }
    if (source['detail']) { this.detail = source.detail.map((x) => new fhir.Reference(x)); }
  }
  /**
   * Example-bound Value Set for code
   */
  public static codeExampleValueSet():ManifestationOrSymptomValueSetType {
    return ManifestationOrSymptomValueSet;
  }
  /**
   * Function to perform basic model validation (e.g., check if required elements are present).
   */
  public override doModelValidation():[string,string][] {
    var results:[string,string][] = super.doModelValidation();
    if (this["code"]) { this.code.forEach((x) => { results.push(...x.doModelValidation()); }) }
    if (this["detail"]) { this.detail.forEach((x) => { results.push(...x.doModelValidation()); }) }
    return results;
  }
}

/**
 * Indicates an action that has been taken or is committed to reduce or eliminate the likelihood of the risk identified by the detected issue from manifesting.  Can also reflect an observation of known mitigating factors that may reduce/eliminate the need for any action.
 */
export class DetectedIssueMitigation extends fhir.BackboneElement implements IDetectedIssueMitigation {
  /**
   * The "text" component can be used for detail or when no appropriate code exists.
   */
  public action: fhir.CodeableConcept|null;
  /**
   * This might not be the same as when the mitigating step was actually taken.
   */
  public date?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.mitigation.date
   */
  public _date?: fhir.FhirElement|undefined;
  /**
   * Identifies the practitioner who determined the mitigation and takes responsibility for the mitigation step occurring.
   */
  public author?: fhir.Reference|undefined;
  /**
   * Default constructor for DetectedIssueMitigation - initializes any required elements to null if a value is not provided.
   */
  constructor(source:Partial<IDetectedIssueMitigation> = { }) {
    super(source);
    if (source['action']) { this.action = new fhir.CodeableConcept(source.action!); }
    else { this.action = null; }
    if (source['date']) { this.date = source.date; }
    if (source['_date']) { this._date = new fhir.FhirElement(source._date!); }
    if (source['author']) { this.author = new fhir.Reference(source.author!); }
  }
  /**
   * Preferred-bound Value Set for action
   */
  public static actionPreferredValueSet():DetectedissueMitigationActionValueSetType {
    return DetectedissueMitigationActionValueSet;
  }
  /**
   * Function to perform basic model validation (e.g., check if required elements are present).
   */
  public override doModelValidation():[string,string][] {
    var results:[string,string][] = super.doModelValidation();
    if (!this["action"]) { results.push(["action",'Missing required element: DetectedIssue.mitigation.action']); }
    if (this["action"]) { results.push(...this.action.doModelValidation()); }
    if (this["_date"]) { results.push(...this._date.doModelValidation()); }
    if (this["author"]) { results.push(...this.author.doModelValidation()); }
    return results;
  }
}

/**
 * Indicates an actual or potential clinical issue with or between one or more active or proposed clinical actions for a patient; e.g. Drug-drug interaction, Ineffective treatment frequency, Procedure-condition conflict, etc.
 */
export class DetectedIssue extends fhir.DomainResource implements IDetectedIssue {
  /**
   * Resource Type Name
   */
  public resourceType: "DetectedIssue";
  /**
   * Business identifier associated with the detected issue record.
   */
  public identifier?: fhir.Identifier[]|undefined;
  /**
   * This element is labeled as a modifier because the status contains the codes cancelled and entered-in-error that mark the issue as not currently valid.
   */
  public status: ObservationStatusValueSetEnum|null;
  /**
   * Extended properties for primitive element: DetectedIssue.status
   */
  public _status?: fhir.FhirElement|undefined;
  /**
   * Identifies the general type of issue identified.
   */
  public code?: fhir.CodeableConcept|undefined;
  /**
   * Indicates the degree of importance associated with the identified issue based on the potential impact on the patient.
   */
  public severity?: DetectedissueSeverityValueSetEnum|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.severity
   */
  public _severity?: fhir.FhirElement|undefined;
  /**
   * Indicates the patient whose record the detected issue is associated with.
   */
  public patient?: fhir.Reference|undefined;
  /**
   * The date or period when the detected issue was initially identified.
   */
  public identifiedDateTime?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.identified[x]
   */
  public _identifiedDateTime?: fhir.FhirElement|undefined;
  /**
   * The date or period when the detected issue was initially identified.
   */
  public identifiedPeriod?: fhir.Period|undefined;
  /**
   * Individual or device responsible for the issue being raised.  For example, a decision support application or a pharmacist conducting a medication review.
   */
  public author?: fhir.Reference|undefined;
  /**
   * There's an implicit constraint on the number of implicated resources based on DetectedIssue.type; e.g. For drug-drug, there would be more than one.  For timing, there would typically only be one.
   */
  public implicated?: fhir.Reference[]|undefined;
  /**
   * Supporting evidence or manifestations that provide the basis for identifying the detected issue such as a GuidanceResponse or MeasureReport.
   */
  public evidence?: fhir.DetectedIssueEvidence[]|undefined;
  /**
   * Should focus on information not covered elsewhere as discrete data - no need to duplicate the narrative.
   */
  public detail?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.detail
   */
  public _detail?: fhir.FhirElement|undefined;
  /**
   * The literature, knowledge-base or similar reference that describes the propensity for the detected issue identified.
   */
  public reference?: string|undefined;
  /**
   * Extended properties for primitive element: DetectedIssue.reference
   */
  public _reference?: fhir.FhirElement|undefined;
  /**
   * Indicates an action that has been taken or is committed to reduce or eliminate the likelihood of the risk identified by the detected issue from manifesting.  Can also reflect an observation of known mitigating factors that may reduce/eliminate the need for any action.
   */
  public mitigation?: fhir.DetectedIssueMitigation[]|undefined;
  /**
   * Default constructor for DetectedIssue - initializes any required elements to null if a value is not provided.
   */
  constructor(source:Partial<IDetectedIssue> = { }) {
    super(source);
    this.resourceType = 'DetectedIssue';
    if (source['identifier']) { this.identifier = source.identifier.map((x) => new fhir.Identifier(x)); }
    if (source['status']) { this.status = source.status; }
    else { this.status = null; }
    if (source['_status']) { this._status = new fhir.FhirElement(source._status!); }
    if (source['code']) { this.code = new fhir.CodeableConcept(source.code!); }
    if (source['severity']) { this.severity = source.severity; }
    if (source['_severity']) { this._severity = new fhir.FhirElement(source._severity!); }
    if (source['patient']) { this.patient = new fhir.Reference(source.patient!); }
    if (source['identifiedDateTime']) { this.identifiedDateTime = source.identifiedDateTime; }
    if (source['_identifiedDateTime']) { this._identifiedDateTime = new fhir.FhirElement(source._identifiedDateTime!); }
    if (source['identifiedPeriod']) { this.identifiedPeriod = new fhir.Period(source.identifiedPeriod!); }
    if (source['author']) { this.author = new fhir.Reference(source.author!); }
    if (source['implicated']) { this.implicated = source.implicated.map((x) => new fhir.Reference(x)); }
    if (source['evidence']) { this.evidence = source.evidence.map((x) => new fhir.DetectedIssueEvidence(x)); }
    if (source['detail']) { this.detail = source.detail; }
    if (source['_detail']) { this._detail = new fhir.FhirElement(source._detail!); }
    if (source['reference']) { this.reference = source.reference; }
    if (source['_reference']) { this._reference = new fhir.FhirElement(source._reference!); }
    if (source['mitigation']) { this.mitigation = source.mitigation.map((x) => new fhir.DetectedIssueMitigation(x)); }
  }
  /**
   * Required-bound Value Set for status
   */
  public static statusRequiredValueSet():ObservationStatusValueSetType {
    return ObservationStatusValueSet;
  }
  /**
   * Preferred-bound Value Set for code
   */
  public static codePreferredValueSet():DetectedissueCategoryValueSetType {
    return DetectedissueCategoryValueSet;
  }
  /**
   * Required-bound Value Set for severity
   */
  public static severityRequiredValueSet():DetectedissueSeverityValueSetType {
    return DetectedissueSeverityValueSet;
  }
  /**
   * Function to perform basic model validation (e.g., check if required elements are present).
   */
  public override doModelValidation():[string,string][] {
    var results:[string,string][] = super.doModelValidation();
    if (!this["resourceType"]) { results.push(["resourceType",'Missing required element: DetectedIssue.resourceType']); }
    if (this["identifier"]) { this.identifier.forEach((x) => { results.push(...x.doModelValidation()); }) }
    if (!this["status"]) { results.push(["status",'Missing required element: DetectedIssue.status']); }
    if (this["_status"]) { results.push(...this._status.doModelValidation()); }
    if (this["code"]) { results.push(...this.code.doModelValidation()); }
    if (this["_severity"]) { results.push(...this._severity.doModelValidation()); }
    if (this["patient"]) { results.push(...this.patient.doModelValidation()); }
    if (this["_identifiedDateTime"]) { results.push(...this._identifiedDateTime.doModelValidation()); }
    if (this["identifiedPeriod"]) { results.push(...this.identifiedPeriod.doModelValidation()); }
    if (this["author"]) { results.push(...this.author.doModelValidation()); }
    if (this["implicated"]) { this.implicated.forEach((x) => { results.push(...x.doModelValidation()); }) }
    if (this["evidence"]) { this.evidence.forEach((x) => { results.push(...x.doModelValidation()); }) }
    if (this["_detail"]) { results.push(...this._detail.doModelValidation()); }
    if (this["_reference"]) { results.push(...this._reference.doModelValidation()); }
    if (this["mitigation"]) { this.mitigation.forEach((x) => { results.push(...x.doModelValidation()); }) }
    return results;
  }
}
